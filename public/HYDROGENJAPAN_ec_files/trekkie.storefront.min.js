!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=15)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetCookieDomain=e.determineCookieDomain=e.cleanupOverScopedCookies=e.clear=e.write=e.isPersistentCookie=e.read=e.allowed=e.enabled=e.isRegulationEnforced=e.isRegulation=e.getRegulation=e.hasTrackingConsentAPI=e.userCanBeTracked=e.cleanupMyShopifyDotComCookie=e.cookieImpl=void 0;var r=n(1),o=n(3),i=n(18),a=n(5),c=void 0;function s(){if(void 0===c)if(d())c=o.hostname();else{for(var t="",e=0,n=o.hostname().split(".").reverse();e<n.length;e++){var r=n[e];t=""===t?"."+r:"."+r+t;var a=i.generateShopifyDValue();if(p("_shopify_d",a,0,t),u("_shopify_d",a))return p("_shopify_d",a,-1,t),void(c=t)}c=""}}function u(t,n){var r=e.cookieImpl.read(t);return!!r&&r===n}function p(t,n,r,o){var i={domain:o,path:"/",maxage:r};e.cookieImpl.write(t,n,i)}function d(){return-1!==o.hostname().indexOf("myshopify.com")}e.cookieImpl={parse:function(t){for(var e={},n=0,r=t.split(/ *; */);n<r.length;n++){var o=r[n].split("=");try{e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]||"")}catch(t){}}return e},read:function(t){if(e.cookieImpl.enabled())return e.cookieImpl.parse(r.virtualDocument().cookie())[t]},write:function(t,n,o){if(void 0===o&&(o={}),e.cookieImpl.enabled()&&e.cookieImpl.allowed()){var i=encodeURIComponent(t)+"="+encodeURIComponent(n);o.maxage&&(o.expires=new Date((new Date).getTime()+o.maxage)),o.path&&(i+="; path="+o.path),o.domain&&(i+="; domain="+o.domain),o.expires&&e.cookieImpl.hasConsent()&&(i+="; expires="+o.expires.toUTCString()),o.secure&&(i+="; secure"),r.virtualDocument().setCookie(i)}},enabled:function(){try{if(void 0===r.virtualDocument().cookie())return!1;r.virtualDocument().setCookie("cookietest=1");var t=-1!==r.virtualDocument().cookie().indexOf("cookietest=");return r.virtualDocument().setCookie("cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"),t}catch(t){return!1}},allowed:function(){var t=e.cookieImpl.read("_cookie_consent");if(t)try{var n=JSON.parse(t);if(n&&"non_essential"===n.block)return!1}catch(t){return!0}return!0},hasConsent:function(){var t,n,r=e.cookieImpl.read("_tracking_consent");if(r)try{var o=JSON.parse(r),i="no"===o.consent;if(o&&i)return!1;var a="yes"===o.consent;if(o&&a)return!0;var c=""===o.consent,s="GDPR"===o.regulation,u=Boolean(null===(n=null===(t=o.prefs)||void 0===t?void 0:t.limit)||void 0===n?void 0:n.includes("GDPR"));if(o&&c&&u&&s)return!1}catch(t){return!0}return!0},isPersistentCookie:function(){var t=e.cookieImpl.read("_shopify_m");return void 0===t||"persistent"===t}},e.cleanupMyShopifyDotComCookie=function(t){if(d()){var e=t+"=; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:01 GMT";r.virtualDocument().setCookie(e)}},e.userCanBeTracked=function(){return Boolean(this.hasTrackingConsentAPI()&&window.Shopify.trackingConsent.userCanBeTracked())},e.hasTrackingConsentAPI=function(){return Boolean(window.Shopify&&window.Shopify.trackingConsent)},e.getRegulation=function(){return this.hasTrackingConsentAPI()?window.Shopify.trackingConsent.getRegulation():""},e.isRegulation=function(t){return void 0===t&&(t=""),Boolean(this.getRegulation()===t)},e.isRegulationEnforced=function(t){void 0===t&&(t="");var e=this.hasTrackingConsentAPI()?window.Shopify.trackingConsent.getShopPrefs():{},n=t===a.TrackingRegulations.CCPA?a.TrackingRegulationLimitations.CCPA_BLOCK_ALL:t;return Boolean(this.isRegulation(t)&&e.limit&&e.limit.includes(n))},e.enabled=function(){return e.cookieImpl.enabled()},e.allowed=function(){return e.cookieImpl.allowed()},e.read=function(t){return e.cookieImpl.read(t)},e.isPersistentCookie=function(){return e.cookieImpl.isPersistentCookie()},e.write=function(t,e,n){s(),p(t,e,n?62208e6:18e5,c)},e.clear=function(t){s(),p(t,"",-1,c)},e.cleanupOverScopedCookies=function(){if(d())for(var t=0,e=["_s","_shopify_fs","_shopify_s","_shopify_sa_p","_shopify_sa_t","_shopify_y","_y"];t<e.length;t++){var n=e[t]+"=; domain=.myshopify.com; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:01 GMT;";r.virtualDocument().setCookie(n)}},e.determineCookieDomain=s,e.resetCookieDomain=function(){c=void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.virtualDocument=void 0;var r=new(function(){function t(){}return t.prototype.cookie=function(){return document.cookie},t.prototype.setCookie=function(t){document.cookie=t},t.prototype.body=function(){return document.body},t.prototype.referrer=function(){return document.referrer},t.prototype.title=function(){return document.title},t.prototype.createElement=function(t){return document.createElement(t)},t.prototype.dispatchEvent=function(t){return document.dispatchEvent(t)},t.prototype.querySelector=function(t){return document.querySelector(t)},t.prototype.querySelectorAll=function(t){return document.querySelectorAll(t)},t.prototype.documentElement=function(){return document.documentElement},t.prototype.getElementsByTagName=function(t){return document.getElementsByTagName(t)},t.prototype.createCustomEvent=function(t,e){try{return new CustomEvent(t,e)}catch(r){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}},t}());e.virtualDocument=function(){return r}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.EcommerceIntegration=e.ANALYTICS_ADDED_PAYMENT=e.ANALYTICS_PERFORMED_SEARCH=e.ANALYTICS_STARTED_ORDER=e.ANALYTICS_COMPLETED_ORDER=e.ANALYTICS_ADDED_PRODUCT=e.ANALYTICS_VIEWED_PRODUCT_CATEGORY=e.ANALYTICS_VIEWED_PRODUCT=e.ANALYTICS_PAGE_VIEW=e.ANALYTICS_GENERIC_EVENT=void 0;var i=n(4),a=n(6),c=n(8),s=n(5),u=n(0),p={viewedProduct:/^[ _]?viewed[ _]?product[ _]?$/i,viewedProductCategory:/^[ _]?viewed[ _]?product[ _]?category[ _]?$/i,viewedProductVariant:/^[ _]?viewed[ _]?product[ _]?variant[ _]?$/i,addedProduct:/^[ _]?added[ _]?product[ _]?$/i,completedOrder:/^[ _]?completed[ _]?order[ _]?$/i,startedOrder:/^[ _]?started[ _]?order[ _]?$/i,performedSearch:/^[ _]?performed[ _]?search[ _]?$/i,addedPayment:/^[ _]?added[ _]?payment[ _]?$/i};e.ANALYTICS_GENERIC_EVENT="genericEvent",e.ANALYTICS_PAGE_VIEW="pageView",e.ANALYTICS_VIEWED_PRODUCT="viewedProduct",e.ANALYTICS_VIEWED_PRODUCT_CATEGORY="viewedProductCategory",e.ANALYTICS_ADDED_PRODUCT="addedProduct",e.ANALYTICS_COMPLETED_ORDER="completedOrder",e.ANALYTICS_STARTED_ORDER="startedOrder",e.ANALYTICS_PERFORMED_SEARCH="performedSearch",e.ANALYTICS_ADDED_PAYMENT="addedPayment";var d=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.shopId=void 0,o.checkoutToken=void 0,o.visitToken=void 0,o.uniqueToken=void 0,o.appName=void 0,o.wrapTrack(),r&&(o.shopId=r.shopId,o.appName=r.appName,o.checkoutToken=r.checkoutToken,o.visitToken=r.visitToken,o.uniqueToken=r.uniqToken),o}return o(e,t),e.prototype.ensureTrackingConsent=function(t,e){u.userCanBeTracked()||!u.hasTrackingConsentAPI()?t():(document.addEventListener(s.TrackingConsentEvents.TRACKING_ACCEPTED,t),e())},e.prototype.wrapTrack=function(){var t=this.track;this.track=function(e){var n=e.event,r=!1;for(var o in p){var i=p[o];if(this[o]&&i.test(n)){this[o].apply(this,[e]),r=!0;break}}r||t.apply(this,Array.prototype.slice.call(arguments))}},e.prototype.addMonorailBatchEvent=function(t){var e=t.eventName,n=t.eventProperties,r=void 0===n?void 0:n,o=t.eventId,i=void 0===o?void 0:o;if(this.appName&&c.appNameToEcommerceEventSchemaId[this.appName]){var s={shop_id:this.shopId,partner_name:this.getEcommerceMetricsTag(),event_name:e,unique_token:this.uniqueToken,visit_token:this.visitToken},u=this.getEcommercePixelIds();u&&u.length>0&&(s.pixel_id=u[0]),r&&(s.event_properties=r),this.checkoutToken&&(s.checkout_token=this.checkoutToken),i&&(s.event_id=i),a.addBatchEvent({schemaId:c.appNameToEcommerceEventSchemaId[this.appName],payload:s})}},e.prototype.sendMonorailMessages=function(t){a.produce(t)},e}(i.Integration);e.EcommerceIntegration=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isShopifyDotCom=e.search=e.protocol=e.port=e.pathname=e.origin=e.setHref=e.href=e.hostname=e.host=e.hash=void 0;var r=n(9);function o(){return r.virtualWindow().location().hostname}e.hash=function(){return r.virtualWindow().location().hash},e.host=function(){return r.virtualWindow().location().host},e.hostname=o,e.href=function(){return r.virtualWindow().location().href},e.setHref=function(t){r.virtualWindow().location().href=t},e.origin=function(){var t=r.virtualWindow().location();return t.origin?t.origin:t.protocol+"//"+t.hostname+(t.port?":"+t.port:"")},e.pathname=function(){return r.virtualWindow().location().pathname},e.port=function(){return r.virtualWindow().location().port},e.protocol=function(){return r.virtualWindow().location().protocol},e.search=function(){return r.virtualWindow().location().search},e.isShopifyDotCom=function(t){return null!==(t=t||o()).match(/(^|\.)shopify\.com$/)}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Integration=void 0;var o=function(){function t(t,e){this.options={},this.options=r(r({},t),e)}return t.flatten=function(t){var e=r({},t);return e.properties={},r(r({},e),t.properties)},t.isEqual=function(t,e){for(var n in t)if(t[n]!==e[n])return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0},t}();e.Integration=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(19);Object.defineProperty(e,"TrackingRegulations",{enumerable:!0,get:function(){return r.TrackingRegulations}});var o=n(12);Object.defineProperty(e,"TrackingConsentEvents",{enumerable:!0,get:function(){return o.TrackingConsentEvents}});var i=n(20);Object.defineProperty(e,"TrackingRegulationLimitations",{enumerable:!0,get:function(){return i.TrackingRegulationLimitations}})},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.produce=e.flushBatchEvents=e.addBatchEvent=e.setMonorailRegion=e.batchEndpoints=e.endpoints=void 0,e.endpoints={global:{url:"https://monorail-edge.shopifysvc.com/v1/produce"},staging:{url:"https://monorail-edge-staging.shopifycloud.com/v1/produce"},canada:{url:"https://monorail-edge-ca.shopifycloud.com/v1/produce"}},e.batchEndpoints={global:{url:"https://monorail-edge.shopifysvc.com/unstable/produce_batch"},staging:{url:"https://monorail-edge-staging.shopifycloud.com/unstable/produce_batch"},canada:{url:"https://monorail-edge-ca.shopifycloud.com/unstable/produce_batch"}};var o=e.batchEndpoints.global,i=new Array;function a(t,e){if(window&&window.navigator&&"function"==typeof window.navigator.sendBeacon&&"function"==typeof window.Blob&&-1===window.navigator.userAgent.lastIndexOf("iPhone; CPU iPhone OS 12_")&&-1===window.navigator.userAgent.lastIndexOf("iPad; CPU OS 12_")){var n=new window.Blob([e],{type:"text/plain"});if(window.navigator.sendBeacon(t,n))return!0}var r=new XMLHttpRequest;try{r.open("POST",t),r.setRequestHeader("Content-Type","text/plain"),r.send(e)}catch(t){console.log(t)}return!1}e.setMonorailRegion=function(t){e.endpoints.hasOwnProperty(t)&&(o=e.batchEndpoints[t])},e.addBatchEvent=function(t){var e=(new Date).getTime(),n={schema_id:t.schemaId,payload:t.payload,metadata:{event_created_at_ms:e}};i.push(n)},e.flushBatchEvents=function(){var t=r(i);i.length=0,function(t){if(0===t.length)return;var e={event_sent_at_ms:(new Date).getTime()},n={};n.metadata=e,n.events=t,a(o.url,JSON.stringify(n))}(t)},e.produce=function(t){if(0!==t.length){var e=(new Date).getTime(),n={event_sent_at_ms:e},r={};r.metadata=n,r.events=[];for(var i=0,c=t;i<c.length;i++){var s=c[i];r.events.push({schema_id:s.schemaId,payload:s.payload,metadata:{event_created_at_ms:e}})}return a(o.url,JSON.stringify(r))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.internalError=e.setGlobalSerializedAppConfig=e.requestImpl=void 0;var r=n(3),o=n(10);e.requestImpl={img:function(t){var e=new Image(1,1);return e.src=t,e.style.display="none",e},queryString:function(t){var e=[];for(var n in t)("number"==typeof t[n]||t[n])&&("object"==typeof t[n]&&0===Object.keys(t[n]).length||e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n])));if(function(t){for(var e=t.length;e>0;--e){var n=Math.floor(Math.random()*e),r=t[n];t[n]=t[e-1],t[e-1]=r}}(e),e.length>1&&0===e[0].indexOf("event=")){var r=e[0];e[0]=e[1],e[1]=r}return e.join("&")}};var i=void 0;e.setGlobalSerializedAppConfig=function(t){i=t},e.internalError=function(t,n){var a={name:t.name,line:t.lineNumber||t.line,script:t.fileName||t.sourceURL||t.script,stack:t.stackTrace||t.stack||t.description,message:t.message,url:r.href(),context:void 0!==n?n:null,appConfig:i||null};o.emitError("internalError",e.requestImpl.queryString(a))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractSchemaIdFromEventName=e.customerEventSchemaId=e.appNameToEcommerceEventSchemaId=e.appNameToPageViewSchemaId=void 0,e.appNameToPageViewSchemaId={admin:"trekkie_admin_page_view/1.0",appstore:"trekkie_appstore_page_view/1.2",blog:"trekkie_blog_page_view/1.2",brochure:"trekkie_brochure_page_view/1.2",checkout:"trekkie_checkout_page_view/1.2","compass-web":"trekkie_compass_web_page_view/1.2",docs:"trekkie_docs_page_view/1.2",development:"edge_test/1.0",exchange:"trekkie_exchange_page_view/1.2",handshake:"trekkie_handshake_page_view/1.0",identity:"trekkie_identity_page_view/1.2","marketing-misc":"trekkie_marketing_misc_page_view/1.2",oberlo:"trekkie_oberlo_app_page_view/1.0","oberlo-home":"trekkie_oberlo_home_page_view/1.2","oberlo-courses":"trekkie_oberlo_courses_page_view/1.0",opinions:"trekkie_opinions_page_view/1.2",partners:"trekkie_partners_page_view/1.2",smiley:"trekkie_smiley_page_view/1.2",storefront:"trekkie_storefront_page_view/1.2",testing:"edge_test/1.0",themestore:"trekkie_themestore_page_view/1.2"},e.appNameToEcommerceEventSchemaId={storefront:"trekkie_storefront_ecommerce_event_emit/2.1",checkout:"trekkie_checkout_ecommerce_event_emit/2.1",test:"edge_test_ecommerce_event_emit/1.0"},e.customerEventSchemaId="trekkie_customer_events/2.0",e.extractSchemaIdFromEventName=function(t){var e=t.toLowerCase();if(0===e.lastIndexOf("monorail://")&&e.length>"monorail://".length)return e.substr("monorail://".length)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.virtualWindow=void 0;var r=new(function(){function t(t){this.nativeWindow=t}return t.prototype.location=function(){return this.nativeWindow.location},t.prototype.userAgent=function(){return this.nativeWindow.navigator.userAgent},t.prototype.crypto=function(){return this.nativeWindow.crypto||this.nativeWindow.msCrypto},t.prototype.top=function(){return this.nativeWindow.top?new t(this.nativeWindow.top):void 0},t.prototype.parent=function(){return this.nativeWindow.parent?new t(this.nativeWindow.parent):void 0},t.prototype.postMessage=function(t,e,n){this.nativeWindow.postMessage(t,e,n)},t.prototype.addEventListener=function(t,e,n){this.nativeWindow.addEventListener(t,e,n)},t.prototype.performance=function(){return this.nativeWindow.performance},t.prototype.onload=function(){throw new Error("Do not use window.onload due to compatibility reasons. Use addEventListener instead of window.onload")},t.prototype.supportsNavigationTiming=function(){return"PerformanceNavigationTiming"in this.nativeWindow},t.prototype.supportsPaintTiming=function(){return"PerformancePaintTiming"in this.nativeWindow},t}())(window);e.virtualWindow=function(){return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.emitError=e.emitMetric=e.setMetricsOptions=e.errorsSchemaId=e.metricsSchemaId=void 0;var r=n(6),o=n(7);e.metricsSchemaId="trekkie_metrics/1.0",e.errorsSchemaId="trekkie_errors/1.0";var i=void 0;e.setMetricsOptions=function(t){i=t},e.emitMetric=function(t,n){try{var a={metric_name:t,metric_value:n};i&&(a.shop_id=i),r.produce([{schemaId:e.metricsSchemaId,payload:a}])}catch(t){o.internalError(t)}},e.emitError=function(t,n){try{var a={error_name:t};i&&(a.shop_id=i),n&&(a.metadata=n),r.produce([{schemaId:e.errorsSchemaId,payload:a}])}catch(t){o.internalError(t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexTime=e.buildToken=e.FirstSeenManager=e.UniqueIdManager=e.firstSeenKey=e.longTermKey=e.deprecatedLongTermKey=e.shortTermKey=e.deprecatedShortTermKey=void 0;var r=n(0),o=n(10),i=n(9);e.deprecatedShortTermKey="_s",e.shortTermKey="_shopify_s",e.deprecatedLongTermKey="_y",e.longTermKey="_shopify_y",e.firstSeenKey="_shopify_fs";var a=function(){function t(t){this.isServerSideCookieWritingEnabled=t}return t.prototype.fetchOrSet=function(t,e,n,i){if(!r.enabled())return"00000000-0000-0000-4000-000000000000";var a=r.read(n)||r.read(e),c=!i;a||(a=s(),c=!0,i&&o.emitMetric("serverSideCookieNotSet_"+n,1)),c&&(r.write(e,a,t),r.write(n,a,t));var u=r.read(n)||r.read(e);return void 0===u?"00000000-0000-0000-5000-000000000000":u},t.prototype.shortTerm=function(){return this.fetchOrSet(!1,e.deprecatedShortTermKey,e.shortTermKey,!1)},t.prototype.longTerm=function(){return this.fetchOrSet(!0,e.deprecatedLongTermKey,e.longTermKey,this.isServerSideCookieWritingEnabled)},t}();e.UniqueIdManager=a;var c=function(){function t(){}return t.prototype.fetchOrSet=function(t){var e=r.read(t)||(new Date).toJSON();return r.write(t,e,!0),e},t.prototype.firstSeen=function(){return this.fetchOrSet(e.firstSeenKey)},t}();function s(){var t="";try{var e=i.virtualWindow().crypto(),n=new Uint16Array(31);e.getRandomValues(n);var r=0;t="xxxx-4xxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g,(function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var i=n[r]%16,a="x"===t?i:3&i|8;return r++,a.toString(16)})).toUpperCase()}catch(e){t="xxxx-4xxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g,(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=16*Math.random()|0,o="x"===t?r:3&r|8;return o.toString(16)})).toUpperCase()}return u()+"-"+t}function u(){var t=0,e=0;try{t=(new Date).getTime()>>>0}catch(e){t=(new Date).getTime()>>>0}try{e=performance.now()>>>0}catch(t){e=0}var n=Math.abs(t+e).toString(16).toLowerCase();return"00000000".substr(0,8-n.length)+n}e.FirstSeenManager=c,e.buildToken=s,e.hexTime=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TrackingConsentEvents=void 0,function(t){t.TRACKING_ACCEPTED="trackingConsentAccepted"}(e.TrackingConsentEvents||(e.TrackingConsentEvents={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enabledIntegrations=e.exportVar=void 0,e.exportVar="trekkie",e.enabledIntegrations=[];var r=n(21);e.enabledIntegrations.push(["Performance",r.Performance]);var o=n(23);e.enabledIntegrations.push(["Facebook Pixel",o.FacebookPixel]);var i=n(24);e.enabledIntegrations.push(["Google Analytics",i.GoogleAnalytics]);var a=n(25);e.enabledIntegrations.push(["Pinterest Pixel",a.Pinterest]);var c=n(26);e.enabledIntegrations.push(["Snap Pixel",c.Snap]);var s=n(27);e.enabledIntegrations.push(["TikTok Pixel",s.TikTok]);var u=n(14);e.enabledIntegrations.push(["Session Attribution",u.SessionAttribution]);var p=n(28);e.enabledIntegrations.push(["Google Gtag Pixel",p.GoogleGtag])},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CampaignManager=e.TimestampManager=e.SessionAttribution=e.orderCompletionEventKey=e.sessionAttributionTimestampKey=e.sessionAttributionParamsKey=e.sessionAttributionMonorailSchema=e.sessionAttributionEventKey=void 0;var i=n(0),a=n(11),c=n(4),s=n(3),u=n(1);e.sessionAttributionEventKey="session-attribution",e.sessionAttributionMonorailSchema="trekkie_session_attribution/1.2",e.sessionAttributionParamsKey="_shopify_sa_p",e.sessionAttributionTimestampKey="_shopify_sa_t",e.orderCompletionEventKey="Completed Order";var p=function(t){function n(e,n,r){var o=t.call(this,{},e)||this;return o.trekkie=n,o.timestampManager=new d,o.campaignManager=new f,setTimeout((function(){o.attributeSession()}),0),r(),o}return o(n,t),n.prototype.isEssential=function(){return!0},n.prototype.identify=function(t){},n.prototype.page=function(t){},n.prototype.track=function(t){var n=this;t.event===e.sessionAttributionEventKey?setTimeout((function(){n.trekkie.emit(e.sessionAttributionEventKey,t,e.sessionAttributionMonorailSchema)}),0):t.event===e.orderCompletionEventKey&&(i.clear(e.sessionAttributionTimestampKey),i.clear(e.sessionAttributionParamsKey))},n.prototype.attributeSession=function(){var t=new Date,n=s.search(),r=this.campaignManager.constructCanonicalUtmString(n);if(this.timestampManager.isValid(t)&&this.campaignManager.isValid(r));else{var o="";try{o=t.toJSON()}catch(t){}this.track({event:e.sessionAttributionEventKey,properties:{sa_url:s.href(),sa_referrer:u.virtualDocument().referrer(),sa_utm_string:r,sa_token:a.buildToken(),over_30_minutes:!this.timestampManager.isWithin30MinuteCutOff(t),cross_utc_midnight:this.timestampManager.isWithin30MinuteCutOff(t)&&!this.timestampManager.isSameDayAs(t),new_campaign:!this.campaignManager.isValid(r),prev_campaign_params:this.campaignManager.fetch(),last_extended:this.timestampManager.fetch(),local_now:o}})}this.timestampManager.extend(t.toJSON()),this.campaignManager.extend(r)},n}(c.Integration);e.SessionAttribution=p;var d=function(){function t(){}return t.prototype.fetch=function(){return i.read(e.sessionAttributionTimestampKey)},t.prototype.extend=function(t){i.cleanupMyShopifyDotComCookie(e.sessionAttributionTimestampKey),i.write(e.sessionAttributionTimestampKey,t,!1)},t.prototype.isValid=function(t){return this.isWithin30MinuteCutOff(t)&&this.isSameDayAs(t)},t.prototype.isWithin30MinuteCutOff=function(t){return this.testStoredTimestamp((function(t,e){return e.getTime()-t.getTime()<=18e5}),t)},t.prototype.isSameDayAs=function(t){return this.testStoredTimestamp((function(t,e){return t.getUTCDate()===e.getUTCDate()}),t)},t.prototype.testStoredTimestamp=function(t,e){var n=this.fetch();if(!n)return!1;try{return t(new Date(n),e)}catch(t){return!1}},t}();e.TimestampManager=d;var f=function(){function t(){}return t.prototype.fetch=function(){return i.read(e.sessionAttributionParamsKey)},t.prototype.extend=function(t){""===t&&(t=this.fetch()||""),i.cleanupMyShopifyDotComCookie(e.sessionAttributionParamsKey),i.write(e.sessionAttributionParamsKey,t,!1)},t.prototype.isValid=function(t){return""===t||this.fetch()===t},t.prototype.constructCanonicalUtmString=function(e){if(""===e||null==e||"?"===e)return"";e="?"===e[0]?e.slice(1):e;for(var n={},r=0,o=e.split("&");r<o.length;r++){var i=o[r].split("=");if(!(i.length<2)){var a=this.decodeReplacingPlus(i[0]),c=this.decodeReplacingPlus(i[1]);c&&a&&(n[a]=c)}}return t.acceptedQueryStringParams.filter((function(t){return n[t]})).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])})).join("&")},t.prototype.decodeReplacingPlus=function(t){return decodeURIComponent(t.replace(/\+/g," "))},t.acceptedQueryStringParams=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","ref","gclid","fbclid","shpxid"],t}();e.CampaignManager=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.replayAnalyticsQueue=void 0;var r=n(16),o=n(13),i=n(7);function a(t,e){for(var n=0,r=e;n<r.length;n++){t[c=(a=r[n])[0]]===t.ready&&t[c].apply(t,a.slice(1))}for(var o=0,i=e;o<i.length;o++){var a,c;t[c=(a=i[o])[0]]&&t[c]!==t.ready&&t[c].apply(t,a.slice(1))}}e.replayAnalyticsQueue=a;try{var c=window[o.exportVar].config;if(c){i.setGlobalSerializedAppConfig(JSON.stringify(c));var s=window[o.exportVar],u=window.trekkie=new r.Tricorder(c,(function(){window[o.exportVar]=u,window._visit={tag:function(){},multitrackToken:function(){return u.trekkie.defaultAttributes.uniqToken}},u.user=function(){return{traits:function(){return{uniqToken:u.trekkie.defaultAttributes.uniqToken}}}},a(u,s)}))}}catch(t){i.internalError(t)}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Tricorder=void 0;var o=n(17),i=n(13),a=n(7),c=n(1),s=n(3),u=n(6),p=n(12),d=n(0),f=n(30),l=/^https?:\/\//,v=function(){function t(t,e){var n=this;this.integrations=[],t.Trekkie.isPixelGateEnabled&&this.hasLoadFeatureScript()&&window.Shopify&&window.Shopify.loadFeatures?window.Shopify.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],(function(r){if(r)throw new Error(r);n.initialize(t,e)})):this.initialize(t,e)}return t.prototype.hasLoadFeatureScript=function(){var t=document.querySelectorAll('[data-source-attribution="shopify.loadfeatures"]');return Boolean(t.length)},t.prototype.initialize=function(t,e){var n=this;this.trekkie=new o.Trekkie(t.Trekkie,(function(){setTimeout((function(){n.loadIntegrations(i.enabledIntegrations,t,n.trekkie,e)}),0)})),this.integrations[0]!==this.trekkie&&this.integrations.unshift(this.trekkie)},t.prototype.loadIntegrations=function(t,e,n,r){for(var o=this.waitFor(t.length,(function(){try{r(),u.flushBatchEvents()}catch(t){a.internalError(t)}})),i=0,c=t;i<c.length;i++){var s=c[i];try{var p=e[s[0]];if(p&&"object"==typeof p){var d=new(0,s[1])(p,n,o);this.integrations.push(d),d instanceof f.CustomerEventsObserver&&window.Shopify&&window.Shopify.events&&window.Shopify.events.subscribe(d)}else o()}catch(t){o(),a.internalError(t)}}},t.prototype.identify=function(t,e){void 0===t&&(t=""),void 0===e&&(e={});try{t instanceof Object&&(e=t,t="");for(var n=0,r=this.integrations;n<r.length;n++){r[n].identify({id:t,properties:e})}}catch(t){a.internalError(t)}},t.prototype.gatedPage=function(t,e){void 0===t&&(t=""),void 0===e&&(e={});try{var n=this.pageDefaults();n.name=t,n.properties=r(r({},n.properties),e);for(var o=0,i=this.integrations;o<i.length;o++){var c=i[o];c.isEssential()||c.page(n)}}catch(t){a.internalError(t)}},t.prototype.page=function(t,e){var n=this;void 0===t&&(t=""),void 0===e&&(e={});try{t instanceof Object&&(e=t,t="");var o=this.pageDefaults();o.name=t,o.properties=r(r({},o.properties),e);for(var i=0,c=this.integrations;i<c.length;i++){var s=c[i];!s.isEssential()&&d.hasTrackingConsentAPI()||s.page(o)}}catch(t){a.internalError(t)}d.hasTrackingConsentAPI()&&(d.userCanBeTracked()?this.gatedPage(t,e):document.addEventListener(p.TrackingConsentEvents.TRACKING_ACCEPTED,(function(){n.gatedPage(t,e)})))},t.prototype.gatedTrack=function(t,e){void 0===t&&(t=""),void 0===e&&(e={});try{for(var n=0,r=this.integrations;n<r.length;n++){var o=r[n];o.isEssential()||o.track({event:t,properties:e})}}catch(t){a.internalError(t)}},t.prototype.track=function(t,e){var n=this;void 0===t&&(t=""),void 0===e&&(e={});try{t instanceof Object&&(e=t,t="");for(var r=0,o=this.integrations;r<o.length;r++){var i=o[r];!i.isEssential()&&d.hasTrackingConsentAPI()||i.track({event:t,properties:e})}}catch(t){a.internalError(t)}d.hasTrackingConsentAPI()&&(d.userCanBeTracked()?this.gatedTrack(t,e):document.addEventListener(p.TrackingConsentEvents.TRACKING_ACCEPTED,(function(){n.gatedTrack(t,e)})))},t.prototype.ready=function(t){try{t()}catch(t){a.internalError(t)}},t.prototype.waitFor=function(t,e){return 0===t?(setTimeout(e,0),function(){}):function(){0===--t&&setTimeout(e,0)}},t.prototype.pageDefaults=function(){var t=s.href(),e=t.indexOf("?");return e=(t=-1===e?"":t.slice(e)).indexOf("#"),t="?"===(t=-1===e?t:t.slice(0,e))?"":t,{referrer:c.virtualDocument().referrer(),path:s.pathname(),search:t,title:c.virtualDocument().title(),url:this.url(),properties:{}}},t.prototype.canonical=function(){for(var t=c.virtualDocument().getElementsByTagName("link"),e=0;e<t.length;e++){var n=t[e];if("canonical"===n.getAttribute("rel")){var r=n.getAttribute("href");if(!l.test(r))continue;if(r.replace(l,"").length<=5)continue;return r}}return""},t.prototype.url=function(){var t=this.canonical();if(t)return t.indexOf("?")>0?t:t+s.search();var e=s.href(),n=e.indexOf("#");return-1===n?e:e.slice(0,n)},t}();e.Tricorder=v},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Trekkie=void 0;var a=n(4),c=n(8),s=n(11),u=n(6),p=n(10),d=n(0),f=function(t){function e(e,n){var r=t.call(this,{},e)||this;return r.init(e,n),r}return o(e,t),e.prototype.isEssential=function(){return!0},e.prototype.init=function(t,e){var n="global";t.monorailRegion&&(n=t.monorailRegion),t.development&&(n="staging"),u.setMonorailRegion(n),window.addEventListener("beforeunload",(function(t){u.flushBatchEvents()})),t.defaultAttributes&&p.setMetricsOptions(t.defaultAttributes.shopId);var r=!1;t.isServerSideCookieWritingEnabled&&(r=t.isServerSideCookieWritingEnabled);var o=new s.UniqueIdManager(r),a=new s.FirstSeenManager;this.defaultAttributes={appName:t.appName,uniqToken:o.longTerm(),visitToken:o.shortTerm(),microSessionId:s.buildToken(),microSessionCount:0,firstSeen:a.firstSeen(),isPersistentCookie:d.isPersistentCookie()},t.defaultAttributes&&(this.defaultAttributes=i(i({},t.defaultAttributes),this.defaultAttributes)),d.cleanupOverScopedCookies(),e()},e.prototype.identify=function(t){},e.prototype.page=function(t){var e=c.appNameToPageViewSchemaId[this.defaultAttributes.appName];this.emit("page",t,e)},e.prototype.track=function(t){var e=c.extractSchemaIdFromEventName(t.event);this.emit("track",t,e)},e.prototype.emit=function(t,e,n){++this.defaultAttributes.microSessionCount,e=a.Integration.flatten(e);var r=i(i({},e),this.defaultAttributes);r.eventType=t,n&&u.produce([{schemaId:n,payload:r}])},e}(a.Integration);e.Trekkie=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateShopifyDValue=void 0,e.generateShopifyDValue=function(){return(new Date).toJSON()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TrackingRegulations=void 0,function(t){t.GDPR="GDPR",t.CCPA="CCPA"}(e.TrackingRegulations||(e.TrackingRegulations={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TrackingRegulationLimitations=void 0,function(t){t.GDPR="GDPR",t.CCPA_BLOCK_ALL="CCPA_BLOCK_ALL"}(e.TrackingRegulationLimitations||(e.TrackingRegulationLimitations={}))},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Performance=void 0;var a=n(4),c=n(22),s=function(t){function e(n,r,o){var i=t.call(this,e.defaultOptions,n)||this;return i.trekkie=r,o(),i}return o(e,t),e.prototype.identify=function(t){},e.prototype.isEssential=function(){return!0},e.prototype.page=function(t){var e={event:"navigation_performance_metrics",properties:a.Integration.flatten(t)},n=this.options;n.navigationTimingApiMeasurementsEnabled&&n.navigationTimingApiMeasurementsSampleRate>=Math.random()&&(e.properties=i(i({},this.pagePerformance()),e.properties),this.trekkie.track(e))},e.prototype.track=function(t){},e.prototype.pagePerformance=function(){return(new c.PagePerformance).collect()},e.defaultOptions={navigationTimingApiMeasurementsEnabled:!0,trekkieTrackSampleRate:0,navigationTimingApiMeasurementsSampleRate:.001},e}(a.Integration);e.Performance=s},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.PagePerformance=e.upperCaseRegex=void 0;var o=n(9);e.upperCaseRegex=/([A-Z])/g;var i=function(){function t(){}return t.prototype.timing=function(){return!(!o.virtualWindow().performance()||!o.virtualWindow().performance().timing)&&o.virtualWindow().performance().timing},t.prototype.getEntry=function(t,e){var n=o.virtualWindow().performance().getEntriesByType(t);return e?n.find((function(t){return t.name===e}))||!1:n[0]},t.prototype.collect=function(){var e={};if(o.virtualWindow().supportsNavigationTiming()&&!a())try{if(o.virtualWindow().supportsPaintTiming()){for(var n=0,r=t.paintAttrs;n<r.length;n++){var i=r[n],c=this.getEntry("paint",this.toEntryName(i));c&&(e[t.paintMetricPrefix+i]=c.startTime)}e[t.paintMetricPrefix+"source"]="PerformancePaintTiming",e[t.paintMetricPrefix+"valid"]=!0}for(var s=this.getEntry("navigation"),u=0,p=t.navigationAttrs;u<p.length;u++){(i=p[u])in s&&(e[t.navigationMetricPrefix+i]=s[i])}e[t.navigationMetricPrefix+"timeOrigin"]=o.virtualWindow().performance().timeOrigin,e[t.navigationMetricPrefix+"source"]="PerformanceNavigationTiming",e[t.navigationMetricPrefix+"valid"]=!0}catch(t){return this.invalidPerfObj()}else{if(!this.timing()||a())return this.invalidPerfObj();try{for(var d=this.timing(),f=0,l=t.timingAttrs;f<l.length;f++){i=l[f];e[t.navigationMetricPrefix+i]=d[i]}e[t.navigationMetricPrefix+"source"]="PerformanceTiming",e[t.navigationMetricPrefix+"valid"]=!0}catch(t){return this.invalidPerfObj()}}return e},t.prototype.invalidPerfObj=function(){for(var e={},n=0,r=t.perfAttrs;n<r.length;n++){var o=r[n];e[t.navigationMetricPrefix+o]=0}return e[t.navigationMetricPrefix+"source"]="None",e[t.navigationMetricPrefix+"valid"]=!1,e},t.prototype.toEntryName=function(t){return t.replace(e.upperCaseRegex,(function(t){return"-"+t[0].toLowerCase()}))},t.perfAttrs=["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"],t.timingAttrs=r(t.perfAttrs,["domLoading","navigationStart"]),t.navigationAttrs=r(t.perfAttrs,["decodedBodySize","encodedBodySize","redirectCount"]),t.paintAttrs=["firstPaint","firstContentfulPaint"],t.navigationMetricPrefix="nt:",t.paintMetricPrefix="pt:",t.performancePrefixes=[t.navigationMetricPrefix,t.paintMetricPrefix],t.prefixRegex=new RegExp(t.performancePrefixes.join("|")),t}();e.PagePerformance=i;var a=function(){return new RegExp("MSIE 9.0|Firefox/7.0|Firefox/8.0").test(o.virtualWindow().userAgent())}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.FacebookPixel=void 0;var a=n(14),c=n(2),s=n(8),u=n(1),p=n(0),d=n(3),f=n(5),l=function(t){function e(n,r,o){var i=t.call(this,e.defaultOptions,n,r.defaultAttributes)||this;return i.campaignManager=new a.CampaignManager,t.prototype.ensureTrackingConsent.call(i,(function(){i.initialize(o)}),o),i}return o(e,t),e.prototype.isEssential=function(){return!1},e.prototype.identify=function(t){throw new Error("identify is not supported")},e.prototype.page=function(t){window.fbq("track","PageView"),this.addMonorailBatchEvent({eventName:c.ANALYTICS_PAGE_VIEW})},e.prototype.track=function(t){var e={};for(var n in t.properties)"revenue"===n?e.value=this.formatRevenue(t.properties.revenue):e[n]=t.properties[n]},e.prototype.viewedProductCategory=function(t){},e.prototype.viewedProductVariant=function(t){},e.prototype.viewedProduct=function(t){var e=t.properties,n={content_ids:this.getProductContentIds(e),content_type:this.getProductContentType(e),content_name:e.name||"",content_category:e.category||"",currency:this.getCurrency(e.currency),value:this.formatRevenue(e.price)};window.fbq("track","ViewContent",n),this.addMonorailBatchEvent({eventName:c.ANALYTICS_VIEWED_PRODUCT,eventProperties:JSON.stringify(n)})},e.prototype.addedProduct=function(t){var e=t.properties,n={content_ids:this.getProductContentIds(e),content_type:this.getProductContentType(e),content_name:e.name||"",content_category:e.category||"",currency:this.getCurrency(e.currency),value:this.formatRevenue(e.price),num_items:this.getProductNumItems(e)};window.fbq("track","AddToCart",n),this.addMonorailBatchEvent({eventName:c.ANALYTICS_ADDED_PRODUCT,eventProperties:JSON.stringify(n)})},e.prototype.addedPayment=function(t){var e=t.properties,n={currency:this.getCurrency(e.currency),value:this.formatRevenue(e.total)};window.fbq("track","AddPaymentInfo",n),this.addMonorailBatchEvent({eventName:c.ANALYTICS_ADDED_PAYMENT,eventProperties:JSON.stringify(n)})},e.prototype.performedSearch=function(t){var e={search_string:t.properties.query||""};window.fbq("track","Search",e),this.addMonorailBatchEvent({eventName:c.ANALYTICS_PERFORMED_SEARCH,eventProperties:JSON.stringify(e)})},e.prototype.startedOrder=function(t){var e=t.properties,n={content_ids:this.getOrderContentIds(e),content_type:this.getOrderContentType(e),currency:this.getCurrency(e.currency),value:this.formatRevenue(e.revenue),num_items:this.getOrderNumItems(e)};window.fbq("track","InitiateCheckout",n),this.addMonorailBatchEvent({eventName:c.ANALYTICS_STARTED_ORDER,eventProperties:JSON.stringify(n)})},e.prototype.completedOrder=function(t){var e=t.properties,n={content_ids:this.getOrderContentIds(e),content_type:this.getOrderContentType(e),currency:this.getCurrency(e.currency),value:this.formatRevenue(e.revenue),num_items:this.getOrderNumItems(e)};if(this.options.conversionsAPIEnabled&&e.customerApiData){var r=(this.campaignManager.fetch()||"").match("&?fbclid=([^&]+)"),o=null;r&&(o=decodeURIComponent(r[1]));var a=JSON.stringify(i(i({},n),{checkoutURL:d.href()})),u={schemaId:s.customerEventSchemaId,payload:{first_name:e.customerApiData.customer.firstName,last_name:e.customerApiData.customer.lastName,event_id:e.customerApiData.pixelEventID,shop_id:this.shopId,facebook_pixel_id:e.customerApiData.pixelID,event_name:"Purchase",payload:a,fbclid:o,fbc:p.read("_fbc")||null,fbp:p.read("_fbp")||null,address:JSON.stringify({city:e.customerApiData.address.city,province:e.customerApiData.address.province,country:e.customerApiData.address.country,zip:e.customerApiData.address.zip}),phone:e.customerApiData.customer.phoneNumber,email:e.customerApiData.customer.emailAddress,ccpa_enforced:p.isRegulationEnforced(f.TrackingRegulations.CCPA)}};this.sendMonorailMessages([u]),window.fbq("track","Purchase",n,{eventID:e.customerApiData.pixelEventID}),this.addMonorailBatchEvent({eventName:c.ANALYTICS_COMPLETED_ORDER,eventProperties:JSON.stringify(n),eventId:e.customerApiData.pixelEventID})}else window.fbq("track","Purchase",n),this.addMonorailBatchEvent({eventName:c.ANALYTICS_COMPLETED_ORDER,eventProperties:JSON.stringify(n)})},e.prototype.setCCPAMode=function(){window.fbq("dataProcessingOptions",["LDU"],1,1e3)},e.prototype.initialize=function(t){this.loadFacebookScript();for(var e=this.options,n=0,r=this.getFacebookPixelIds(e);n<r.length;n++){var o=r[n];p.isRegulationEnforced(f.TrackingRegulations.CCPA)&&this.setCCPAMode(),window.fbq("init",o),""!==e.agent&&window.fbq("set","agent",e.agent,o)}t()},e.prototype.generateScriptTag=function(){var t=u.virtualDocument().createElement("script");return t.async=!0,t.src="https://connect.facebook.net/en_US/fbevents.js",t},e.prototype.getFacebookPixelIds=function(t){for(var e=[],n=0,r=t.pixelIds.concat([t.pixelId]);n<r.length;n++){var o=r[n];null!==o&&""!==o&&e.push(o)}return e},e.prototype.loadFacebookScript=function(){if(!window.fbq||"function"!=typeof window.fbq){window.fbq=function(){window.fbq.callMethod?window.fbq.callMethod.apply(window.fbq,arguments):window.fbq.queue.push(arguments)},window._fbq||(window._fbq=window.fbq),window.fbq.push=window.fbq,window.fbq.loaded=!0,window.fbq.version="2.0",window.fbq.queue=[];var t=u.virtualDocument().getElementsByTagName("script")[0];void 0===t?document.head.appendChild(this.generateScriptTag()):t.parentNode.insertBefore(this.generateScriptTag(),t)}},e.prototype.formatRevenue=function(t){return Number(t||0).toFixed(2)},e.prototype.getCurrency=function(t){return t||"USD"},e.prototype.getProductContentIds=function(t){var e=t.productId||t.variantId||t.sku;return e?[e]:[]},e.prototype.getProductContentType=function(t){return t.productId?"product_group":"product"},e.prototype.getProductNumItems=function(t){return t.quantity||this.getProductContentIds(t).length},e.prototype.getProductKey=function(t){return t.productId||t.variantId||t.sku},e.prototype.getOrderContentIds=function(t){for(var e=[],n=0,r=t.products||[];n<r.length;n++){var o=r[n],i=this.getProductKey(o);if(i)-1===e.indexOf(i)&&e.push(i)}return e},e.prototype.getOrderContentType=function(t){for(var e=0,n=t.products||[];e<n.length;e++){if(n[e].productId)return"product_group"}return"product"},e.prototype.getOrderNumItems=function(t){for(var e=0,n=0,r=t.products||[];n<r.length;n++){var o=r[n];this.getProductKey(o)&&(e+=o.quantity||1)}return e},e.prototype.getEcommerceMetricsTag=function(){return"facebook"},e.prototype.getEcommercePixelIds=function(){var t=this.options;return this.getFacebookPixelIds(t)},e.defaultOptions={pixelId:"",pixelIds:[],agent:"",conversionsAPIEnabled:!1},e}(c.EcommerceIntegration);e.FacebookPixel=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleAnalytics=void 0;var a=n(2),c=n(3),s=n(1),u=function(t){function e(n,r,o){var i=t.call(this,e.defaultOptions,n,r.defaultAttributes)||this;return i.pageCalled=!1,i.ecommerce=!1,i.enhancedEcommerceLoaded=!1,i.setWindowGa(),t.prototype.ensureTrackingConsent.call(i,(function(){i.initialize(o)}),o),i}return o(e,t),e.prototype.identify=function(t){throw new Error("identify is not supported")},e.prototype.isEssential=function(){return!1},e.prototype.page=function(t){this.overrideDefaultPageProperties(t);var e=this.options,n=this.path(t),r=t.name||t.title,o={page:n,title:r};window.ga("set",o);var i={page:n,title:r,location:t.url};if(this.pageCalled&&delete i.location,window.ga("send","pageview",i),this.addMonorailBatchEvent({eventName:a.ANALYTICS_PAGE_VIEW,eventProperties:JSON.stringify(i)}),t.name&&e.trackNamedPages){var c=this.convertPageToTrack(t);c.properties.nonInteraction=!0,this.trackInternal(c)}this.pageCalled=!0},e.prototype.track=function(t){},e.prototype.trackInternal=function(t){var e=this.options,n=t.properties,r={eventAction:t.event,eventCategory:n.category||"All",eventLabel:n.label,eventValue:this.formatValue(n.value||n.revenue),nonInteraction:!!(n.hasOwnProperty("nonInteraction")?n.nonInteraction:e.nonInteraction)};window.ga("send","event",r),this.addMonorailBatchEvent({eventName:a.ANALYTICS_GENERIC_EVENT,eventProperties:JSON.stringify(r)})},e.prototype.completedOrder=function(t){var e=t.properties,n=e.total||e.revenue||0,r=e.orderId,o=e.products||[];if(r){this.ecommerce||(window.ga("require","ecommerce"),this.ecommerce=!0);var i={affiliation:e.affiliation,shipping:e.shipping,revenue:n,tax:e.tax,id:r,currency:this.getCurrency(e.currency)};window.ga("ecommerce:addTransaction",i);for(var c=[],s=0,u=o;s<u.length;s++){var p=u[s],d=this.createProductTrack(e,p),f={category:d.category,quantity:this.getProductQuantity(d),price:d.price,name:d.name,sku:d.sku||d.variantId,id:r,currency:this.getCurrency(d.currency)};window.ga("ecommerce:addItem",f),c.push(f)}window.ga("ecommerce:send"),this.addMonorailBatchEvent({eventName:a.ANALYTICS_COMPLETED_ORDER,eventProperties:JSON.stringify({orderInfo:i,items:c})})}},e.prototype.viewedProductVariant=function(t){},e.prototype.viewedProductEnhanced=function(t){var e=t.properties;this.loadEnhancedEcommerce(t);var n=this.enhancedEcommerceTrackProduct(e);window.ga("ec:setAction","detail");var r=this.pushEnhancedEcommerce(t);this.addMonorailBatchEvent({eventName:a.ANALYTICS_VIEWED_PRODUCT,eventProperties:JSON.stringify({item:n,event:r})})},e.prototype.addedProductEnhanced=function(t){var e=t.properties;this.loadEnhancedEcommerce(t);var n=this.enhancedEcommerceTrackProduct(e);window.ga("ec:setAction","add");var r=this.pushEnhancedEcommerce(t);this.addMonorailBatchEvent({eventName:a.ANALYTICS_ADDED_PRODUCT,eventProperties:JSON.stringify({item:n,event:r})})},e.prototype.startedOrderEnhanced=function(t){var e=t.properties,n=e.products||[];this.loadEnhancedEcommerce(t);for(var r=[],o=0,i=n;o<i.length;o++){var c=i[o],s=this.createProductTrack(e,c),u=this.enhancedEcommerceTrackProduct(s);r.push(u)}var p=e.step||1;window.ga("ec:setAction","checkout",{step:p});var d=this.pushEnhancedEcommerce(t);this.addMonorailBatchEvent({eventName:a.ANALYTICS_STARTED_ORDER,eventProperties:JSON.stringify({items:r,checkoutStep:p,event:d})})},e.prototype.completedOrderEnhanced=function(t){var e=t.properties,n=e.total||e.revenue||0,r=e.orderId,o=e.products||[];if(r){this.loadEnhancedEcommerce(t);for(var i=[],c=0,s=o;c<s.length;c++){var u=s[c],p=this.createProductTrack(e,u),d=this.enhancedEcommerceTrackProduct(p);i.push(d)}var f={id:r,affiliation:e.affiliation,revenue:n,tax:e.tax,shipping:e.shipping,coupon:e.coupon};window.ga("ec:setAction","purchase",f);var l=this.pushEnhancedEcommerce(t);this.addMonorailBatchEvent({eventName:a.ANALYTICS_COMPLETED_ORDER,eventProperties:JSON.stringify({orderInfo:f,items:i,event:l})})}},e.prototype.initialize=function(t){this.pageCalled=!1,this.loadGAScript();var n=this.options;"localhost"===c.hostname()&&(n.domain="none"),n.enhancedEcommerce&&this.enhancedEcommerce(),window.ga("create",n.trackingId,{cookieDomain:n.domain||e.defaultOptions.domain,siteSpeedSampleRate:n.siteSpeedSampleRate,sampleRate:n.sampleRate,allowLinker:!0}),n.doubleClick&&window.ga("require","displayfeatures"),n.enhancedLinkAttribution&&window.ga("require","linkid"),n.anonymizeIp&&window.ga("set","anonymizeIp",!0),t()},e.prototype.setWindowGa=function(){window.ga&&"function"==typeof window.ga||(window.ga=function(){(window.ga.q=window.ga.q||[]).push(arguments)})},e.prototype.loadGAScript=function(){window.GoogleAnalyticsObject="ga",this.setWindowGa(),window.ga.l=(new Date).getTime();var t=s.virtualDocument().createElement("script");t.async=!0,t.src="https://www.google-analytics.com/analytics.js";var e=s.virtualDocument().getElementsByTagName("script")[0];void 0===e?document.head.appendChild(t):e.parentNode.insertBefore(t,e)},e.prototype.enhancedEcommerce=function(){this.viewedProduct=this.viewedProductEnhanced,this.addedProduct=this.addedProductEnhanced,this.startedOrder=this.startedOrderEnhanced,this.completedOrder=this.completedOrderEnhanced},e.prototype.path=function(t){var e=t.path;return this.options.includeSearch&&t.search&&(e+=t.search),e},e.prototype.formatValue=function(t){return!t||t<0?0:Math.round(t)},e.prototype.getProductQuantity=function(t){return t.quantity||1},e.prototype.getCurrency=function(t){return t||"USD"},e.prototype.createProductTrack=function(t,e){var n=i({},e);return n.currency=e.currency||this.getCurrency(t.currency),n},e.prototype.loadEnhancedEcommerce=function(t){this.enhancedEcommerceLoaded||(window.ga("require","ec"),this.enhancedEcommerceLoaded=!0);var e=t.properties;window.ga("set","&cu",this.getCurrency(e.currency))},e.prototype.enhancedEcommerceTrackProduct=function(t){var e={id:t.sku||t.variantId,name:t.name,category:t.category,quantity:this.getProductQuantity(t),price:t.price,brand:t.brand,variant:t.variant,currency:this.getCurrency(t.currency)};return t.coupon&&(e.coupon=t.coupon),window.ga("ec:addProduct",e),e},e.prototype.pushEnhancedEcommerce=function(t){var e=t.properties,n={eventCategory:e.category||"EnhancedEcommerce",eventAction:t.event||"Action not defined",eventLabel:e.label,nonInteraction:!0};return window.ga("send","event",n),n},e.prototype.convertPageToTrack=function(t){return{event:t.name?"Viewed "+t.name+" Page":"Loaded a Page",properties:t.properties}},e.prototype.overrideDefaultPageProperties=function(t){for(var e in t.properties)"properties"!==e&&"name"!==e&&e in t&&(t[e]=t.properties[e])},e.prototype.getEcommerceMetricsTag=function(){return"google_analytics"},e.prototype.getEcommercePixelIds=function(){return[this.options.trackingId]},e.defaultOptions={anonymizeIp:!1,domain:"auto",doubleClick:!1,enhancedEcommerce:!1,enhancedLinkAttribution:!1,includeSearch:!1,nonInteraction:!1,siteSpeedSampleRate:1,sampleRate:100,trackNamedPages:!0,trackingId:""},e}(a.EcommerceIntegration);e.GoogleAnalytics=u},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Pinterest=void 0;var i=n(2),a=n(7),c=n(0),s=function(t){function e(n,r,o){var i=t.call(this,e.defaultOptions,n,r.defaultAttributes)||this;return t.prototype.ensureTrackingConsent.call(i,(function(){i.initialize(o)}),o),i}return o(e,t),e.prototype.identify=function(t){},e.prototype.track=function(t){},e.prototype.page=function(t){var e=this.options,n=t.properties;"3.0"!==e.pixelVersion||n&&"product"===n.pageType||(this.forwardToPinterest("PageVisit"),this.addMonorailBatchEvent({eventName:i.ANALYTICS_PAGE_VIEW}))},e.prototype.isEssential=function(){return!1},e.prototype.viewedProduct=function(t){if("3.0"===this.options.pixelVersion){var e=t.properties,n={currency:e.currency,line_items:[{product_id:e.productId,product_variant_id:e.variantId,product_name:e.name,product_price:e.price,product_quantity:e.quantity}]};this.forwardToPinterest("PageVisit",n),this.addMonorailBatchEvent({eventName:i.ANALYTICS_VIEWED_PRODUCT,eventProperties:JSON.stringify(n)})}},e.prototype.viewedProductCategory=function(t){"3.0"===this.options.pixelVersion&&(this.forwardToPinterest("ViewCategory"),this.addMonorailBatchEvent({eventName:i.ANALYTICS_VIEWED_PRODUCT_CATEGORY}))},e.prototype.addedProduct=function(t){if("3.0"===this.options.pixelVersion){var e=t.properties,n={currency:e.currency,line_items:[{product_id:e.productId,product_variant_id:e.variantId,product_name:e.name,product_price:e.price,product_quantity:Number(t.properties.quantity)}]};this.forwardToPinterest("AddToCart",n),this.addMonorailBatchEvent({eventName:i.ANALYTICS_ADDED_PRODUCT,eventProperties:JSON.stringify(n)})}},e.prototype.completedOrder=function(t){var e=this.options;if("3.0"===e.pixelVersion){var n=t.properties,r={value:n.revenue,currency:n.currency,order_quantity:this.getOrderNumItems(n),line_items:n.products.map((function(t,e){return{product_id:t.productId,product_variant_id:t.variantId,product_name:t.name,product_price:t.price,product_quantity:t.quantity}}))};this.forwardToPinterest("Checkout",r),this.addMonorailBatchEvent({eventName:i.ANALYTICS_COMPLETED_ORDER,eventProperties:JSON.stringify(r)})}else!c.userCanBeTracked()&&c.hasTrackingConsentAPI()||(a.requestImpl.img("https://ct.pinterest.com/v2.5/?tid="+e.pixelId+"&event=checkout&value=0.00&quantity=1"),this.addMonorailBatchEvent({eventName:i.ANALYTICS_COMPLETED_ORDER}))},e.prototype.performedSearch=function(t){if("3.0"===this.options.pixelVersion){var e={search_query:t.properties.query};this.forwardToPinterest("Search",e),this.addMonorailBatchEvent({eventName:i.ANALYTICS_PERFORMED_SEARCH,eventProperties:JSON.stringify(e)})}},e.prototype.forwardToPinterest=function(t,e){window.pintrk("track",t,Object.assign({np:"shopify"},e))},e.prototype.getOrderNumItems=function(t){for(var e=0,n=0,r=t.products||[];n<r.length;n++){var o=r[n];this.getProductKey(o)&&(e+=o.quantity||1)}return e},e.prototype.getProductKey=function(t){return t.productId||t.variantId||t.sku},e.prototype.initialize=function(t){var e=this.options;"3.0"===e.pixelVersion&&(this.loadPinterestScript(),window.pintrk("load",e.pixelId,{np:"shopify"}),window.pintrk("page")),t()},e.prototype.loadPinterestScript=function(){if(!window.pintrk||"function"!=typeof window.pintrk){window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))},window.pintrk.queue=[],window.pintrk.version="3.0";var t=document.createElement("script");t.async=!0,t.src="https://s.pinimg.com/ct/core.js";var e=document.getElementsByTagName("script")[0];void 0===e?document.head.appendChild(t):e.parentNode.insertBefore(t,e)}},e.prototype.getEcommerceMetricsTag=function(){return"pinterest"},e.prototype.getEcommercePixelIds=function(){return[this.options.pixelId]},e.defaultOptions={pixelId:"",pixelVersion:"2.5"},e}(i.EcommerceIntegration);e.Pinterest=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Snap=void 0;var i=n(2),a=n(1),c=function(t){function e(n,r,o){var i=t.call(this,e.defaultOptions,n,r.defaultAttributes)||this;return t.prototype.ensureTrackingConsent.call(i,(function(){i.initialize(o)}),o),i}return o(e,t),e.prototype.isEssential=function(){return!1},e.prototype.identify=function(t){throw new Error("identify is not supported")},e.prototype.page=function(t){window.snaptr("track","PAGE_VIEW"),this.addMonorailBatchEvent({eventName:i.ANALYTICS_PAGE_VIEW})},e.prototype.track=function(t){var e={};for(var n in t.properties)"revenue"===n?e.price=this.formatRevenue(t.properties.revenue):e[n]=t.properties[n]},e.prototype.viewedProductCategory=function(t){},e.prototype.viewedProductVariant=function(t){},e.prototype.viewedProduct=function(t){var e=t.properties,n={item_ids:this.getProductContentIds(e),item_type:this.getProductContentType(e),item_name:e.name||"",item_category:e.category||"",currency:this.getCurrency(e.currency),price:this.formatRevenue(e.price)};window.snaptr("track","VIEW_CONTENT",n),this.addMonorailBatchEvent({eventName:i.ANALYTICS_VIEWED_PRODUCT,eventProperties:JSON.stringify(n)})},e.prototype.addedProduct=function(t){var e=t.properties,n={item_ids:this.getProductContentIds(e),item_type:this.getProductContentType(e),item_name:e.name||"",item_category:e.category||"",currency:this.getCurrency(e.currency),price:this.formatRevenue(e.price),number_items:this.getProductNumItems(e)};window.snaptr("track","ADD_CART",n),this.addMonorailBatchEvent({eventName:i.ANALYTICS_ADDED_PRODUCT,eventProperties:JSON.stringify(n)})},e.prototype.addedPayment=function(t){var e=t.properties,n={currency:this.getCurrency(e.currency),price:this.formatRevenue(e.total)};window.snaptr("track","ADD_BILLING",n),this.addMonorailBatchEvent({eventName:i.ANALYTICS_ADDED_PAYMENT,eventProperties:JSON.stringify(n)})},e.prototype.performedSearch=function(t){var e={search_string:t.properties.query||""};window.snaptr("track","SEARCH",e),this.addMonorailBatchEvent({eventName:i.ANALYTICS_PERFORMED_SEARCH,eventProperties:JSON.stringify(e)})},e.prototype.startedOrder=function(t){var e=t.properties,n={item_ids:this.getOrderContentIds(e),item_type:this.getOrderContentType(e),currency:this.getCurrency(e.currency),price:this.formatRevenue(e.revenue),number_items:this.getOrderNumItems(e)};window.snaptr("track","START_CHECKOUT",n),this.addMonorailBatchEvent({eventName:i.ANALYTICS_STARTED_ORDER,eventProperties:JSON.stringify(n)})},e.prototype.completedOrder=function(t){var e=t.properties,n={item_ids:this.getOrderContentIds(e),item_type:this.getOrderContentType(e),currency:this.getCurrency(e.currency),price:this.formatRevenue(e.revenue),number_items:this.getOrderNumItems(e)};window.snaptr("track","PURCHASE",n),this.addMonorailBatchEvent({eventName:i.ANALYTICS_COMPLETED_ORDER,eventProperties:JSON.stringify(n)})},e.prototype.initialize=function(t){this.loadSnapScript();var e=this.options;window.snaptr("init",e.pixelId),t()},e.prototype.loadSnapScript=function(){if(!window.snaptr||"function"!=typeof window.snaptr){window.snaptr=function(){window.snaptr.handleRequest?window.snaptr.handleRequest.apply(window.snaptr,arguments):window.snaptr.queue.push(arguments)},window.snaptr.queue=[],window.snaptr.push=window.snaptr,window.snaptr.loaded=!0;var t=a.virtualDocument().createElement("script");t.async=!0,t.src="https://sc-static.net/scevent.min.js";var e=a.virtualDocument().getElementsByTagName("script")[0];void 0===e?document.head.appendChild(t):e.parentNode.insertBefore(t,e)}},e.prototype.formatRevenue=function(t){return Number(t||0).toFixed(2)},e.prototype.getCurrency=function(t){return t||"USD"},e.prototype.getProductContentIds=function(t){var e=t.productId||t.variantId||t.sku;return e?[e]:[]},e.prototype.getProductContentType=function(t){return t.productId?"product_group":"product"},e.prototype.getProductNumItems=function(t){return t.quantity||this.getProductContentIds(t).length},e.prototype.getProductKey=function(t){return t.productId||t.variantId||t.sku},e.prototype.getOrderContentIds=function(t){for(var e=[],n=0,r=t.products||[];n<r.length;n++){var o=r[n],i=this.getProductKey(o);if(i)-1===e.indexOf(i)&&e.push(i)}return e},e.prototype.getOrderContentType=function(t){for(var e=0,n=t.products||[];e<n.length;e++){if(n[e].productId)return"product_group"}return"product"},e.prototype.getOrderNumItems=function(t){for(var e=0,n=0,r=t.products||[];n<r.length;n++){var o=r[n];this.getProductKey(o)&&(e+=o.quantity||1)}return e},e.prototype.getEcommerceMetricsTag=function(){return"snap"},e.prototype.getEcommercePixelIds=function(){return[this.options.pixelId]},e.defaultOptions={pixelId:""},e}(i.EcommerceIntegration);e.Snap=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TikTok=void 0;var i=n(2),a=n(1),c=function(t){function e(n,r,o){var i=t.call(this,e.defaultOptions,n,r.defaultAttributes)||this;return t.prototype.ensureTrackingConsent.call(i,(function(){i.initialize(o)}),o),i}return o(e,t),e.prototype.isEssential=function(){return!1},e.prototype.identify=function(t){throw new Error("identify is not supported")},e.prototype.page=function(t){window.ttq.track("Browse"),this.addMonorailBatchEvent({eventName:i.ANALYTICS_PAGE_VIEW})},e.prototype.track=function(t){},e.prototype.viewedProductCategory=function(t){},e.prototype.viewedProductVariant=function(t){},e.prototype.viewedProduct=function(t){var e=t.properties,n={content_id:this.getProductKey(e),content_type:this.getProductContentType(e),content_name:e.name||"",content_category:e.category||"",currency:this.getCurrency(e.currency),price:this.formatRevenue(e.price)};window.ttq.track("ViewContent",n),this.addMonorailBatchEvent({eventName:i.ANALYTICS_VIEWED_PRODUCT,eventProperties:JSON.stringify(n)})},e.prototype.addedProduct=function(t){var e=t.properties,n={content_id:this.getProductKey(e),content_type:this.getProductContentType(e),content_name:e.name||"",content_category:e.category||"",currency:this.getCurrency(e.currency),price:this.formatRevenue(e.price),quantity:this.getProductNumItems(e)};window.ttq.track("AddToCart",n),this.addMonorailBatchEvent({eventName:i.ANALYTICS_ADDED_PRODUCT,eventProperties:JSON.stringify(n)})},e.prototype.addedPayment=function(t){var e=t.properties,n={currency:this.getCurrency(e.currency),value:this.formatRevenue(e.total)};window.ttq.track("AddBilling",n),this.addMonorailBatchEvent({eventName:i.ANALYTICS_ADDED_PAYMENT,eventProperties:JSON.stringify(n)})},e.prototype.performedSearch=function(t){var e={query:t.properties.query||""};window.ttq.track("Search",e),this.addMonorailBatchEvent({eventName:i.ANALYTICS_PERFORMED_SEARCH,eventProperties:JSON.stringify(e)})},e.prototype.startedOrder=function(t){var e=t.properties,n={contents:this.getOrderContents(e),value:this.formatRevenue(e.revenue),quantity:this.getOrderNumItems(e),currency:this.getCurrency(e.currency)};window.ttq.track("StartCheckout",n),this.addMonorailBatchEvent({eventName:i.ANALYTICS_STARTED_ORDER,eventProperties:JSON.stringify(n)})},e.prototype.completedOrder=function(t){var e=t.properties,n={contents:this.getOrderContents(e),value:this.formatRevenue(e.revenue),quantity:this.getOrderNumItems(e),currency:this.getCurrency(e.currency)};window.ttq.track("Purchase",n),this.addMonorailBatchEvent({eventName:i.ANALYTICS_COMPLETED_ORDER,eventProperties:JSON.stringify(n)})},e.prototype.initialize=function(t){var e=this.options;this.loadTikTokScript(e.pixelId),t()},e.prototype.loadTikTokScript=function(t){if(!window.ttq||!window.ttq.loaded){window.TiktokAnalyticsObject="ttq";var e=window.ttq=window.ttq||[];e.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group"],e.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var n=0;n<e.methods.length;n++)e.setAndDefer(e,e.methods[n]);e.instance=function(t){for(var n=e._i[t]||[],r=0;r<e.methods.length;r++)e.setAndDefer(n,e.methods[r]);return n},e.load=function(t){var n="https://analytics.tiktok.com/i18n/pixel/events.js";e._i=e._i||{},e._i[t]=[],e._i[t]._u=n;var r=a.virtualDocument().createElement("script");r.type="text/javascript",r.async=!0,r.src=n+"?sdkid="+t+"&lib=ttq";var o=a.virtualDocument().getElementsByTagName("script")[0];void 0===o?document.head.appendChild(r):o.parentNode.insertBefore(r,o),window.ttq.loaded=!0},e.load(t),e.page()}},e.prototype.formatRevenue=function(t){return Number(t||0).toFixed(2)},e.prototype.getCurrency=function(t){return t||"USD"},e.prototype.getProductContentType=function(t){return t.productId?"product_group":"product"},e.prototype.getProductNumItems=function(t){return t.quantity||1},e.prototype.getProductKey=function(t){return t.productId||t.variantId||t.sku||""},e.prototype.getOrderContents=function(t){for(var e=[],n=0,r=t.products||[];n<r.length;n++){var o=r[n];e.push({content_id:this.getProductKey(o),content_type:this.getProductContentType(o),content_name:o.name||"",content_category:o.category||"",currency:this.getCurrency(o.currency),price:this.formatRevenue(o.price),quantity:this.getProductNumItems(o)})}return e},e.prototype.getOrderNumItems=function(t){for(var e=0,n=0,r=t.products||[];n<r.length;n++){var o=r[n];this.getProductKey(o)&&(e+=o.quantity||1)}return e},e.prototype.getEcommerceMetricsTag=function(){return"tiktok"},e.prototype.getEcommercePixelIds=function(){return[this.options.pixelId]},e.defaultOptions={pixelId:""},e}(i.EcommerceIntegration);e.TikTok=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleGtag=void 0;var a=n(2),c=n(29),s=n(5),u=n(0),p=function(t){function e(e,n,r){var o=t.call(this,{},e,n.defaultAttributes)||this;return t.prototype.ensureTrackingConsent.call(o,(function(){o.initialize(r)}),r),o}return o(e,t),e.prototype.isEssential=function(){return!0},e.prototype.identify=function(t){throw new Error("identify is not supported")},e.prototype.track=function(t){},e.prototype.setCCPAMode=function(t){var e=i({},t);return e.restricted_data_processing=!0,e},e.prototype.initialize=function(t){var e=this.options,n={send_page_view:!1};this.loadGtagScript(),u.isRegulationEnforced(s.TrackingRegulations.CCPA)&&(n=this.setCCPAMode(n)),window.gtag("config",e.conversionId,n),t()},e.prototype.loadGtagScript=function(){var t=this.options;(!window.dataLayer||window.dataLayer&&!Array.isArray(window.dataLayer))&&(window.dataLayer=[]),(!window.gtag||window.gtag&&"function"!=typeof window.gtag)&&(window.gtag=function(){window.dataLayer.push(arguments)}),window.gtag("js",new Date),c.script({src:"https://www.googletagmanager.com/gtag/js?id="+t.conversionId})},e.prototype.page=function(t){var e={send_to:this.gtagEventLabelFor("page_view"),page_path:t.path||"",page_title:t.name||t.title,page_location:t.url};window.gtag("event","page_view",e),this.addMonorailBatchEvent({eventName:a.ANALYTICS_PAGE_VIEW,eventProperties:JSON.stringify(e)})},e.prototype.viewedProduct=function(t){var e=t.properties,n={send_to:this.gtagEventLabelFor("view_item"),ecomm_prodid:this.generateProductIds([e]),ecomm_totalvalue:e.price*e.quantity,ecomm_pagetype:"product",items:[{id:e.productId||e.variantId,name:e.name,brand:e.brand,category:e.category,coupon:e.coupon,price:e.price.toString(),quantity:e.quantity,variant:e.variant}]};window.gtag("event","view_item",n),this.addMonorailBatchEvent({eventName:a.ANALYTICS_VIEWED_PRODUCT,eventProperties:JSON.stringify(n)})},e.prototype.addedProduct=function(t){var e=t.properties,n={send_to:this.gtagEventLabelFor("add_to_cart"),ecomm_prodid:this.generateProductIds([e]),ecomm_totalvalue:e.price*e.quantity,ecomm_pagetype:"cart",value:e.price*e.quantity,currency:e.currency||"USD",items:[{id:e.productId||e.variantId,name:e.name,brand:e.brand,category:e.category,coupon:e.coupon,price:e.price.toString(),quantity:e.quantity,variant:e.variant}]};window.gtag("event","add_to_cart",n),this.addMonorailBatchEvent({eventName:a.ANALYTICS_ADDED_PRODUCT,eventProperties:JSON.stringify(n)})},e.prototype.completedOrder=function(t){var e=t.properties,n={send_to:this.gtagEventLabelFor("purchase"),transaction_id:e.orderId,value:e.revenue,currency:e.currency||"USD",tax:e.tax.toString(),shipping:e.shipping.toString(),items:e.products.map((function(t){return{id:t.productId||t.variantId,name:t.name,brand:t.brand,category:t.category,coupon:t.coupon,price:t.price.toString(),quantity:t.quantity,variant:t.variant}}))};window.gtag("event","purchase",n),this.addMonorailBatchEvent({eventName:a.ANALYTICS_COMPLETED_ORDER,eventProperties:JSON.stringify(n)})},e.prototype.startedOrder=function(t){var e=t.properties,n={send_to:this.gtagEventLabelFor("begin_checkout"),ecomm_prodid:this.generateProductIds(e.products),ecomm_totalvalue:this.cartTotalValue(e.products),ecomm_pagetype:"cart",value:e.revenue,currency:e.currency||"USD",items:e.products.map((function(t){return{id:t.productId||t.variantId,name:t.name,brand:t.brand,category:t.category,coupon:t.coupon,price:t.price.toString(),quantity:t.quantity,variant:t.variant}})),coupon:e.coupon};window.gtag("event","begin_checkout",n),this.addMonorailBatchEvent({eventName:a.ANALYTICS_STARTED_ORDER,eventProperties:JSON.stringify(n)})},e.prototype.performedSearch=function(t){var e=t.properties,n={send_to:this.gtagEventLabelFor("search"),search_term:e.query};window.gtag("event","search",n),this.addMonorailBatchEvent({eventName:a.ANALYTICS_PERFORMED_SEARCH,eventProperties:JSON.stringify(n)})},e.prototype.addedPayment=function(t){var e=t.properties,n={send_to:this.gtagEventLabelFor("add_payment_info"),currency:e.currency,total:e.total};window.gtag("event","add_payment_info",n),this.addMonorailBatchEvent({eventName:a.ANALYTICS_ADDED_PAYMENT,eventProperties:JSON.stringify(n)})},e.prototype.generateProductIds=function(t){for(var e=new Array,n=0,r=t;n<r.length;n++){var o=r[n],i="shopify_"+this.targetCountry()+"_"+o.productId+"_"+o.variantId;e.push(i)}return e},e.prototype.cartTotalValue=function(t){for(var e=0,n=0,r=t;n<r.length;n++){var o=r[n];e+=o.price*o.quantity}return e},e.prototype.targetCountry=function(){return this.options.targetCountry||"US"},e.prototype.gtagEventLabelFor=function(t){for(var e=0,n=this.options.eventLabels;e<n.length;e++){var r=n[e];if(r.type===t)return r.action_label}},e.prototype.getEcommerceMetricsTag=function(){return"google_gtag"},e.prototype.getEcommercePixelIds=function(){return[this.options.conversionId]},e}(a.EcommerceIntegration);e.GoogleGtag=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iframe=e.script=void 0;var r=n(1);function o(t,e){if(e.onLoad&&t.addEventListener("load",e.onLoad,!1),e.className){if(/^\d/.test(e.className))throw new Error("Invalid className: "+e.className+" starts with a digit");t.className=e.className}}e.script=function(t){var e=r.virtualDocument().createElement("script");return e.src=t.src,e.async=!0,o(e,t),r.virtualDocument().body().appendChild(e),e},e.iframe=function(t){var e=r.virtualDocument().createElement("iframe");return e.src=t.src,e.style.display="none",o(e,t),r.virtualDocument().body().appendChild(e),e}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CustomerEventsObserver=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onPageView=function(t){},e.prototype.onViewedProductCategory=function(t){},e.prototype.onViewedProductVariant=function(t){},e.prototype.onViewedProduct=function(t){},e.prototype.onAddedProduct=function(t){},e.prototype.onAddedPayment=function(t){},e.prototype.onPerformedSearch=function(t){},e.prototype.onStartedOrder=function(t){},e.prototype.onCompletedOrder=function(t){},e}(n(2).EcommerceIntegration);e.CustomerEventsObserver=i}]);